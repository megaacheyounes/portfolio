<div fxLayout="row" class='pad-64' fxFlexFill>
  <div fxFlex='100%' fxFlexFill fxLayoutAlign="center center">

    <mat-card class='pad-32 ' color='primary' *ngIf="!dataSource">
      <mat-card-header>
        <mat-card-title>
          <mat-icon class="mat-18">show_chart</mat-icon>
          Stats
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>

        <mat-form-field floatPlaceholder="auto">
          <input matInput [(ngModel)]="secret" name='secret' type="password" required placeholder="you know what goes here">
        </mat-form-field>

      </mat-card-content>

      <mat-card-actions align="start" *ngIf="!dataSource">
        <button mat-raised-button color='primary' fxFlex (click)="loadStats()">load</button>
      </mat-card-actions>


      <mat-card-footer>
        <mat-error *ngIf="error">Error: {{error}}</mat-error>

      </mat-card-footer>
    </mat-card>

    <mat-card *ngIf="dataSource" fxFlexFill>
      <mat-card-header>
        <mat-card-title>
          <mat-icon class="mat-18">show_chart</mat-icon>
          Stats
        </mat-card-title>
      </mat-card-header>

      <mat-card-content fxFlexFill>


        <div fxLayout="column" class="pad-32 mat-zelevation-8" fxFlexFill>

          <table mat-table [dataSource]="dataSource">

            <ng-container matColumnDef="ip">
              <th mat-header-cell *matHeaderCellDef> IP </th>
              <td mat-cell *matCellDef="let element"> {{element.ip}} </td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef> date </th>
              <td mat-cell *matCellDef="let element"> {{element.date | formatDate}} </td>
            </ng-container>

            <ng-container matColumnDef="method">
              <th mat-header-cell *matHeaderCellDef> method </th>
              <td mat-cell *matCellDef="let element"> {{element.method}} </td>
            </ng-container>

            <ng-container matColumnDef="location">
              <th mat-header-cell *matHeaderCellDef> location </th>
              <td mat-cell *matCellDef="let element"> {{element.location}} </td>
            </ng-container>


            <ng-container matColumnDef="language">
              <th mat-header-cell *matHeaderCellDef> language </th>
              <td mat-cell *matCellDef="let element" matTooltip="element.language"> {{element.language | formatLanguage}} </td>
            </ng-container>

            <ng-container matColumnDef="browser">
              <th mat-header-cell *matHeaderCellDef> browser </th>
              <td mat-cell *matCellDef="let element"> {{element.browser}} </td>
            </ng-container>

            <ng-container matColumnDef="os">
              <th mat-header-cell *matHeaderCellDef> os </th>
              <td mat-cell *matCellDef="let element"> {{element.os}} </td>
            </ng-container>

            <ng-container matColumnDef="device">
              <th mat-header-cell *matHeaderCellDef> device </th>
              <td mat-cell *matCellDef="let element"> {{element.device}} </td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="statsColumns"> </tr>
            <tr mat-row *matRowDef="let row; columns: statsColumns;"></tr>

          </table>
          <mat-paginator #paginator [pageSizeOptions]="[10,25,50]" showFirstLastButton>
          </mat-paginator>
        </div>

      </mat-card-content>

    </mat-card>

  </div>
</div>
